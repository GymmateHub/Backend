server:
  port: 8080

# Disable mail health check in dev (mail server not reachable locally)
management:
  health:
    mail:
      enabled: false

spring:
  datasource:
    url: ${PG_URI:jdbc:postgresql://localhost:5432/gymmate}
    driver-class-name: ${DB_DRIVER}
    username: ${PG_USER:gymmate}
    password: ${PG_PASSWORD:gymmate_password}
  jpa:
    hibernate:
      # Use 'validate' to ensure entities match DB schema
      # Use 'update' only for quick prototyping (can cause schema drift)
      ddl-auto: validate
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: false
        show_sql: false

  # Flyway Configuration - ENABLED for proper schema management
  flyway:
    enabled: true
    baseline-on-migrate: true
    baseline-version: 0
    validate-on-migrate: true
    clean-disabled: false
    locations: classpath:db/migration

# CORS Configuration for development
cors:
  allowed-origins: "http://localhost:3000,http://localhost:5173,http://localhost:4200,http://127.0.0.1:3000,http://127.0.0.1:5173,http://127.0.0.1:4200,http://gymmatehub.com"
  allowed-methods: "GET,POST,PUT,DELETE,PATCH,OPTIONS"
  allowed-headers: "*"
  exposed-headers: "Authorization,Content-Type,Content-Disposition,X-Requested-With,Accept"
  allow-credentials: true
  max-age: 3600

# Development-specific admin configuration
app:
  admin:
    email: dev.admin@gymmatehub.com
    password: DevAdmin#@1357
    firstName: Development
    lastName: Administrator
  password-reset:
    expiration-minutes: 30
  frontend-url: http://localhost:3000
