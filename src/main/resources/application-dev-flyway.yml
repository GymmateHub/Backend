server:
  port: 8080

spring:
  datasource:
    url: ${PG_URI:jdbc:postgresql://localhost:5432/gymmate}
    driver-class-name: ${DB_DRIVER:org.postgresql.Driver}
    username: ${PG_USER:gymmate}
    password: ${PG_PASSWORD:gymmate_password}

  jpa:
    hibernate:
      # Use 'validate' when Flyway manages schema, 'update' for quick dev
      ddl-auto: validate
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: false
        show_sql: false

  # Flyway Configuration - ENABLED for proper schema management
  flyway:
    enabled: true
    baseline-on-migrate: true
    baseline-version: 0
    validate-on-migrate: true
    clean-disabled: false  # Allow flyway:clean in dev
    locations: classpath:db/migration
    # For fresh start, uncomment the next line temporarily
    # clean-on-validation-error: true

# CORS Configuration for development
cors:
  allowed-origins: "http://localhost:3000,http://localhost:5173,http://localhost:4200,http://127.0.0.1:3000,http://127.0.0.1:5173,http://127.0.0.1:4200,http://gymmatehub.com"
  allowed-methods: "GET,POST,PUT,DELETE,PATCH,OPTIONS"
  allowed-headers: "*"
  exposed-headers: "Authorization,Content-Type,Content-Disposition,X-Requested-With,Accept"
  allow-credentials: true
  max-age: 3600

# Development-specific admin configuration
app:
  admin:
    email: dev.admin@gymmatehub.com
    password: DevAdmin#@1357
    firstName: Development
    lastName: Administrator

# Logging - more verbose for development
logging:
  level:
    org.flywaydb: DEBUG
    com.gymmate: DEBUG
    org.hibernate.SQL: DEBUG

